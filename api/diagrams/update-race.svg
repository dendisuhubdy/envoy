<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="879" height="431"><source><![CDATA[participant Envoy as E [color="black"]
participant Management Server 0 as M0 [color="black"]
participant Management Server 1 as M1 [color="black"]

E->M1: (V=..,R={},N=..,T=CDS) [color="green"]
E->M0: (V=X,R={foo},N=A,T=EDS) [color="green"]
M1->E: (V=M,R={foo:...,bar:...},N=D,T=CDS) [color="gray"]
E->M0: (V=X,R={foo,bar},N=A,T=EDS [color="green"] 
Note right of M0: Management server 0 replies\nbefore processing resource update at X
M0->E: (V=Y,R={foo:...,},N=B,T=EDS) [color="gray"]
E->M0: (V=Y,R={foo,bar},N=B,T=EDS [color="green"]]]></source><desc style="-webkit-tap-highlight-color:transparent">Created with RaphaÃ«l 2.2.0</desc><defs style="-webkit-tap-highlight-color:transparent"><path style="-webkit-tap-highlight-color:transparent" id="raphael-marker-block" stroke-linecap="round" d="M5,0 0,2.5 5,5z"/><marker style="-webkit-tap-highlight-color:transparent" id="raphael-marker-endblock55-obj7z6rg" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xmlns:xlink="http://www.w3.org/1999/xlink" style="-webkit-tap-highlight-color:transparent" fill="green" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker style="-webkit-tap-highlight-color:transparent" id="raphael-marker-endblock55-objj4k5u" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xmlns:xlink="http://www.w3.org/1999/xlink" style="-webkit-tap-highlight-color:transparent" fill="green" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker style="-webkit-tap-highlight-color:transparent" id="raphael-marker-endblock55-obj29epo" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xmlns:xlink="http://www.w3.org/1999/xlink" style="-webkit-tap-highlight-color:transparent" fill="gray" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker style="-webkit-tap-highlight-color:transparent" id="raphael-marker-endblock55-objpdvv6" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xmlns:xlink="http://www.w3.org/1999/xlink" style="-webkit-tap-highlight-color:transparent" fill="green" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker style="-webkit-tap-highlight-color:transparent" id="raphael-marker-endblock55-obj30sxg" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xmlns:xlink="http://www.w3.org/1999/xlink" style="-webkit-tap-highlight-color:transparent" fill="gray" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker><marker style="-webkit-tap-highlight-color:transparent" id="raphael-marker-endblock55-objre9bk" markerHeight="5" markerWidth="5" orient="auto" refX="2.5" refY="2.5"><use xmlns:xlink="http://www.w3.org/1999/xlink" style="-webkit-tap-highlight-color:transparent" fill="green" stroke="none" stroke-width="1" transform="rotate(180 2.5 2.5) scale(1,1)" xlink:href="#raphael-marker-block"/></marker></defs><rect style="-webkit-tap-highlight-color:transparent" width="68" height="38" x="10" y="20" fill="#fff" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect style="-webkit-tap-highlight-color:transparent" width="48" height="18" x="19.984" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="44" y="39" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">Envoy</tspan></text><rect style="-webkit-tap-highlight-color:transparent" width="68" height="38" x="10" y="373.188" fill="#fff" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect style="-webkit-tap-highlight-color:transparent" width="48" height="18" x="19.984" y="383.188" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="44" y="392.188" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">Envoy</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="#000" stroke-width="2" d="M44,58L44,373.1875"/><rect style="-webkit-tap-highlight-color:transparent" width="202.422" height="38" x="231.633" y="20" fill="#fff" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect style="-webkit-tap-highlight-color:transparent" width="182.422" height="18" x="241.625" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="332.844" y="39" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">Management Server 0</tspan></text><rect style="-webkit-tap-highlight-color:transparent" width="202.422" height="38" x="231.633" y="373.188" fill="#fff" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect style="-webkit-tap-highlight-color:transparent" width="182.422" height="18" x="241.625" y="383.188" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="332.844" y="392.188" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">Management Server 0</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="#000" stroke-width="2" d="M332.84375,58L332.84375,373.1875"/><rect style="-webkit-tap-highlight-color:transparent" width="202.422" height="38" x="646.883" y="20" fill="#fff" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect style="-webkit-tap-highlight-color:transparent" width="182.422" height="18" x="656.875" y="30" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="748.094" y="39" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">Management Server 1</tspan></text><rect style="-webkit-tap-highlight-color:transparent" width="202.422" height="38" x="646.883" y="373.188" fill="#fff" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect style="-webkit-tap-highlight-color:transparent" width="182.422" height="18" x="656.875" y="383.188" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="748.094" y="392.188" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">Management Server 1</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="#000" stroke-width="2" d="M748.09375,58L748.09375,373.1875"/><rect style="-webkit-tap-highlight-color:transparent" width="211.234" height="18" x="290.422" y="74" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="396.047" y="83" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">(V=..,R={},N=..,T=CDS)</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="green" stroke-dasharray="none" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj7z6rg)" d="M44,96C44,96,680.1960251531564,96,743.1011497105362,96"/><rect style="-webkit-tap-highlight-color:transparent" width="220.828" height="18" x="78" y="112" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="188.422" y="121" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">(V=X,R={foo},N=A,T=EDS)</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="green" stroke-dasharray="none" stroke-width="2" marker-end="url(#raphael-marker-endblock55-objj4k5u)" d="M44,134C44,134,289.5398899442516,134,327.8455514858475,134"/><rect style="-webkit-tap-highlight-color:transparent" width="336.047" height="18" x="228.016" y="150" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="396.047" y="159" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">(V=M,R={foo:...,bar:...},N=D,T=CDS)</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="gray" stroke-dasharray="none" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj29epo)" d="M748.09375,172C748.09375,172,111.89772484684363,172,48.99260028946367,172"/><rect style="-webkit-tap-highlight-color:transparent" width="249.641" height="18" x="63.594" y="188" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="188.422" y="197" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">(V=X,R={foo,bar},N=A,T=EDS</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="green" stroke-dasharray="none" stroke-width="2" marker-end="url(#raphael-marker-endblock55-objpdvv6)" d="M44,210C44,210,289.5398899442516,210,327.8455514858475,210"/><rect style="-webkit-tap-highlight-color:transparent" width="375.25" height="47.188" x="352.844" y="230" fill="none" stroke="#000" stroke-width="2" rx="0" ry="0"/><rect style="-webkit-tap-highlight-color:transparent" width="365.25" height="37.188" x="358.031" y="235" fill="none" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="540.469" y="253.594" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="-3.594">Management server 0 replies</tspan><tspan style="-webkit-tap-highlight-color:transparent" x="540.469" dy="19.2">before processing resource update at X</tspan></text><rect style="-webkit-tap-highlight-color:transparent" width="268.844" height="18" x="54" y="293.188" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="188.422" y="302.188" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">(V=Y,R={foo:...,},N=B,T=EDS)</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="gray" stroke-dasharray="none" stroke-width="2" marker-end="url(#raphael-marker-endblock55-obj30sxg)" d="M332.84375,315.1875C332.84375,315.1875,87.30386005574837,315.1875,48.99819851415248,315.1875"/><rect style="-webkit-tap-highlight-color:transparent" width="249.641" height="18" x="63.594" y="331.188" fill="#fff" stroke="none" rx="0" ry="0"/><text style="-webkit-tap-highlight-color:transparent" x="188.422" y="340.188" fill="#000" stroke="none" font-family="&quot;Andale Mono&quot;, monospace" font-size="16" text-anchor="middle"><tspan style="-webkit-tap-highlight-color:transparent" dy="6">(V=Y,R={foo,bar},N=B,T=EDS</tspan></text><path style="-webkit-tap-highlight-color:transparent" fill="none" stroke="green" stroke-dasharray="none" stroke-width="2" marker-end="url(#raphael-marker-endblock55-objre9bk)" d="M44,353.1875C44,353.1875,289.5398899442516,353.1875,327.8455514858475,353.1875"/></svg>